<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <link href="nv.d3.css" rel="stylesheet" type="text/css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.5.17/d3.min.js" charset="utf-8"></script>
    <script src="https://d3js.org/d3-queue.v3.min.js"></script>

    <script src="nv.d3.js"></script>

    <style>
        text {
            font: 12px sans-serif;
        }

        svg {
            display: block;
        }

        html, body, svg {
            margin: 0px;
            padding: 0px;
            height: 100%;
            width: 100%;
        }
    </style>
</head>
<body class='with-3d-shadow with-transitions'>
<button onclick="expandLegend();">Expand/Contract Legend</button>
<script>
    var expandLegend = function () {
        var exp = chart.legend.expanded();
        chart.legend.expanded(!exp);
        chart.update();
    }
</script>
<svg id="chart1"></svg>

<script>
    var q = d3.queue();
    allGames = [];
    urls = [];
    for (i = 1; i < 167; i++) {
        urls.push("http://boardgamedb.me/api/games?page=" + i);
    }
    urls.forEach(function (url) {
        q.defer(d3.json, url);
    });
    q.awaitAll(function (error, jsonDataSets) {
        if (error) throw error;
        console.log(jsonDataSets);

    });


    var histcatexplong = [
        {
            "key": "Card Game",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 1], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 1], [1935, 0], [1936, 0], [1937, 0], [1938, 2], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 0], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 2], [1956, 1], [1957, 0], [1958, 0], [1959, 0], [1960, 0], [1961, 0], [1962, 0], [1963, 1], [1964, 1], [1965, 2], [1966, 0], [1967, 1], [1968, 0], [1969, 0], [1970, 1], [1971, 0], [1972, 0], [1973, 1], [1974, 1], [1975, 1], [1976, 1], [1977, 1], [1978, 2], [1979, 2], [1980, 3], [1981, 4], [1982, 2], [1983, 1], [1984, 8], [1985, 3], [1986, 2], [1987, 1], [1988, 5], [1989, 5], [1990, 1], [1991, 2], [1992, 4], [1993, 2], [1994, 3], [1995, 5], [1996, 5], [1997, 2], [1998, 16], [1999, 8], [2000, 14], [2001, 5], [2002, 7], [2003, 12], [2004, 12], [2005, 0], [2006, 0], [2007, 1], [2008, 2], [2009, 2], [2010, 4], [2011, 1], [2012, 10], [2013, 13], [2014, 29], [2015, 168], [2016, 430], [2017, 38]]
        }, {
            "key": "Fantasy",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 0], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 0], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 0], [1956, 0], [1957, 0], [1958, 0], [1959, 0], [1960, 0], [1961, 0], [1962, 0], [1963, 0], [1964, 0], [1965, 0], [1966, 0], [1967, 0], [1968, 0], [1969, 0], [1970, 0], [1971, 0], [1972, 0], [1973, 0], [1974, 0], [1975, 0], [1976, 0], [1977, 0], [1978, 0], [1979, 3], [1980, 0], [1981, 4], [1982, 1], [1983, 0], [1984, 0], [1985, 0], [1986, 1], [1987, 2], [1988, 1], [1989, 2], [1990, 3], [1991, 2], [1992, 1], [1993, 1], [1994, 0], [1995, 2], [1996, 0], [1997, 0], [1998, 4], [1999, 1], [2000, 3], [2001, 3], [2002, 3], [2003, 7], [2004, 3], [2005, 0], [2006, 0], [2007, 0], [2008, 1], [2009, 0], [2010, 0], [2011, 0], [2012, 6], [2013, 6], [2014, 12], [2015, 63], [2016, 173], [2017, 27]]
        }, {
            "key": "Expansion for Base-game",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 0], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 0], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 0], [1956, 0], [1957, 0], [1958, 0], [1959, 0], [1960, 0], [1961, 0], [1962, 0], [1963, 0], [1964, 0], [1965, 0], [1966, 0], [1967, 0], [1968, 0], [1969, 0], [1970, 0], [1971, 0], [1972, 0], [1973, 0], [1974, 0], [1975, 0], [1976, 0], [1977, 0], [1978, 1], [1979, 0], [1980, 0], [1981, 0], [1982, 0], [1983, 0], [1984, 2], [1985, 0], [1986, 0], [1987, 1], [1988, 0], [1989, 1], [1990, 2], [1991, 1], [1992, 0], [1993, 0], [1994, 2], [1995, 3], [1996, 1], [1997, 1], [1998, 2], [1999, 1], [2000, 2], [2001, 0], [2002, 3], [2003, 1], [2004, 5], [2005, 1], [2006, 0], [2007, 0], [2008, 0], [2009, 0], [2010, 1], [2011, 0], [2012, 7], [2013, 7], [2014, 8], [2015, 98], [2016, 191], [2017, 13]]
        }, {
            "key": "Dice",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 0], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 0], [1951, 0], [1952, 0], [1953, 0], [1954, 1], [1955, 0], [1956, 0], [1957, 0], [1958, 0], [1959, 0], [1960, 1], [1961, 0], [1962, 0], [1963, 1], [1964, 0], [1965, 0], [1966, 1], [1967, 0], [1968, 0], [1969, 0], [1970, 2], [1971, 2], [1972, 2], [1973, 1], [1974, 5], [1975, 0], [1976, 0], [1977, 3], [1978, 4], [1979, 0], [1980, 1], [1981, 1], [1982, 1], [1983, 1], [1984, 1], [1985, 3], [1986, 1], [1987, 2], [1988, 1], [1989, 3], [1990, 2], [1991, 0], [1992, 2], [1993, 2], [1994, 1], [1995, 1], [1996, 1], [1997, 3], [1998, 0], [1999, 6], [2000, 4], [2001, 0], [2002, 1], [2003, 3], [2004, 5], [2005, 1], [2006, 0], [2007, 0], [2008, 0], [2009, 0], [2010, 0], [2011, 0], [2012, 5], [2013, 5], [2014, 14], [2015, 31], [2016, 117], [2017, 17]]
        }, {
            "key": "Wargame",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 0], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 0], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 0], [1956, 0], [1957, 0], [1958, 0], [1959, 0], [1960, 0], [1961, 0], [1962, 0], [1963, 0], [1964, 0], [1965, 0], [1966, 0], [1967, 0], [1968, 0], [1969, 0], [1970, 0], [1971, 0], [1972, 3], [1973, 2], [1974, 4], [1975, 5], [1976, 4], [1977, 8], [1978, 2], [1979, 7], [1980, 6], [1981, 4], [1982, 3], [1983, 4], [1984, 4], [1985, 1], [1986, 6], [1987, 3], [1988, 0], [1989, 4], [1990, 4], [1991, 7], [1992, 5], [1993, 8], [1994, 10], [1995, 9], [1996, 12], [1997, 11], [1998, 12], [1999, 10], [2000, 9], [2001, 1], [2002, 10], [2003, 10], [2004, 17], [2005, 0], [2006, 2], [2007, 1], [2008, 0], [2009, 3], [2010, 2], [2011, 0], [2012, 9], [2013, 7], [2014, 12], [2015, 58], [2016, 166], [2017, 20]]
        }, {
            "key": "Miniatures",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 0], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 0], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 0], [1956, 0], [1957, 0], [1958, 0], [1959, 0], [1960, 0], [1961, 0], [1962, 0], [1963, 0], [1964, 0], [1965, 0], [1966, 0], [1967, 0], [1968, 0], [1969, 0], [1970, 0], [1971, 0], [1972, 0], [1973, 0], [1974, 0], [1975, 3], [1976, 2], [1977, 6], [1978, 2], [1979, 1], [1980, 0], [1981, 0], [1982, 0], [1983, 0], [1984, 1], [1985, 0], [1986, 0], [1987, 0], [1988, 0], [1989, 1], [1990, 0], [1991, 2], [1992, 1], [1993, 1], [1994, 3], [1995, 1], [1996, 0], [1997, 0], [1998, 2], [1999, 3], [2000, 3], [2001, 1], [2002, 6], [2003, 4], [2004, 6], [2005, 0], [2006, 0], [2007, 1], [2008, 0], [2009, 0], [2010, 0], [2011, 0], [2012, 10], [2013, 5], [2014, 13], [2015, 47], [2016, 128], [2017, 16]]
        }, {
            "key": "Party Game",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 1], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 1], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 2], [1956, 0], [1957, 0], [1958, 0], [1959, 0], [1960, 1], [1961, 0], [1962, 0], [1963, 0], [1964, 0], [1965, 1], [1966, 0], [1967, 0], [1968, 0], [1969, 0], [1970, 0], [1971, 0], [1972, 0], [1973, 0], [1974, 0], [1975, 0], [1976, 1], [1977, 0], [1978, 0], [1979, 0], [1980, 0], [1981, 0], [1982, 0], [1983, 0], [1984, 0], [1985, 1], [1986, 3], [1987, 2], [1988, 1], [1989, 5], [1990, 3], [1991, 1], [1992, 1], [1993, 0], [1994, 2], [1995, 1], [1996, 4], [1997, 1], [1998, 1], [1999, 4], [2000, 2], [2001, 1], [2002, 3], [2003, 6], [2004, 4], [2005, 1], [2006, 0], [2007, 0], [2008, 0], [2009, 3], [2010, 3], [2011, 2], [2012, 1], [2013, 5], [2014, 12], [2015, 63], [2016, 118], [2017, 2]]
        }, {
            "key": "Science Fiction",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 0], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 0], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 1], [1956, 0], [1957, 0], [1958, 0], [1959, 0], [1960, 0], [1961, 0], [1962, 0], [1963, 0], [1964, 0], [1965, 0], [1966, 0], [1967, 0], [1968, 0], [1969, 0], [1970, 1], [1971, 0], [1972, 0], [1973, 0], [1974, 1], [1975, 0], [1976, 1], [1977, 1], [1978, 3], [1979, 2], [1980, 1], [1981, 2], [1982, 1], [1983, 2], [1984, 1], [1985, 1], [1986, 2], [1987, 0], [1988, 2], [1989, 3], [1990, 1], [1991, 0], [1992, 1], [1993, 0], [1994, 2], [1995, 1], [1996, 0], [1997, 2], [1998, 1], [1999, 3], [2000, 4], [2001, 1], [2002, 3], [2003, 3], [2004, 4], [2005, 0], [2006, 0], [2007, 0], [2008, 0], [2009, 0], [2010, 0], [2011, 0], [2012, 0], [2013, 2], [2014, 8], [2015, 35], [2016, 145], [2017, 25]]
        }, {
            "key": "Children\'s Game",
            "values": [[1900, 2], [1901, 0], [1902, 0], [1903, 0], [1904, 0], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 1], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 0], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 1], [1931, 0], [1932, 1], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 1], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 0], [1956, 0], [1957, 1], [1958, 0], [1959, 0], [1960, 2], [1961, 0], [1962, 0], [1963, 3], [1964, 0], [1965, 2], [1966, 0], [1967, 0], [1968, 2], [1969, 0], [1970, 0], [1971, 2], [1972, 2], [1973, 0], [1974, 5], [1975, 3], [1976, 4], [1977, 3], [1978, 1], [1979, 1], [1980, 3], [1981, 7], [1982, 5], [1983, 4], [1984, 2], [1985, 3], [1986, 2], [1987, 4], [1988, 7], [1989, 8], [1990, 5], [1991, 7], [1992, 7], [1993, 10], [1994, 10], [1995, 11], [1996, 6], [1997, 7], [1998, 9], [1999, 10], [2000, 10], [2001, 12], [2002, 3], [2003, 6], [2004, 2], [2005, 4], [2006, 1], [2007, 0], [2008, 4], [2009, 3], [2010, 4], [2011, 3], [2012, 8], [2013, 7], [2014, 16], [2015, 52], [2016, 87], [2017, 0]]
        }, {
            "key": "Fighting",
            "values": [[1900, 0], [1901, 0], [1902, 0], [1903, 0], [1904, 0], [1905, 0], [1906, 0], [1907, 0], [1908, 0], [1909, 0], [1910, 0], [1911, 0], [1912, 0], [1913, 0], [1914, 0], [1915, 0], [1916, 0], [1917, 0], [1918, 0], [1919, 0], [1920, 0], [1921, 0], [1922, 0], [1923, 0], [1924, 0], [1925, 1], [1926, 0], [1927, 0], [1928, 0], [1929, 0], [1930, 0], [1931, 0], [1932, 0], [1933, 0], [1934, 0], [1935, 0], [1936, 0], [1937, 0], [1938, 0], [1939, 0], [1940, 0], [1941, 0], [1942, 0], [1943, 0], [1944, 0], [1945, 0], [1946, 0], [1947, 0], [1948, 0], [1949, 0], [1950, 0], [1951, 0], [1952, 0], [1953, 0], [1954, 0], [1955, 0], [1956, 0], [1957, 0], [1958, 0], [1959, 0], [1960, 0], [1961, 0], [1962, 0], [1963, 0], [1964, 0], [1965, 0], [1966, 0], [1967, 0], [1968, 0], [1969, 0], [1970, 0], [1971, 0], [1972, 0], [1973, 0], [1974, 0], [1975, 0], [1976, 0], [1977, 0], [1978, 0], [1979, 0], [1980, 0], [1981, 1], [1982, 0], [1983, 0], [1984, 0], [1985, 0], [1986, 0], [1987, 1], [1988, 0], [1989, 0], [1990, 1], [1991, 1], [1992, 1], [1993, 1], [1994, 0], [1995, 1], [1996, 0], [1997, 0], [1998, 1], [1999, 4], [2000, 4], [2001, 1], [2002, 6], [2003, 8], [2004, 6], [2005, 0], [2006, 0], [2007, 0], [2008, 0], [2009, 0], [2010, 1], [2011, 0], [2012, 4], [2013, 3], [2014, 4], [2015, 31], [2016, 115], [2017, 13]]
        }];

    var colors = d3.scale.category20();
    var chart;

    nv.addGraph(function () {
        chart = nv.models.stackedAreaWithFocusChart()
            .useInteractiveGuideline(true)
            .x(function (d) {
                return d[0]
            })
            .y(function (d) {
                return d[1]
            })
            .duration(300);
        chart.brushExtent([1970, 2017]);

        chart.xAxis.tickFormat(d3.format('d'));
        chart.x2Axis.tickFormat(d3.format('d'));
        chart.yAxis.tickFormat(d3.format('d'));
        chart.y2Axis.tickFormat(d3.format('d'));

        chart.legend.vers('furious');

        d3.select('#chart1')
            .datum(histcatexplong)
            .transition().duration(1000)
            .call(chart)
            .each('start', function () {
                setTimeout(function () {
                    d3.selectAll('#chart1 *').each(function () {
                        if (this.__transition__)
                            this.__transition__.duration = 1;
                    })
                }, 0)
            });

        nv.utils.windowResize(chart.update);
        return chart;
    });


</script>
</body>
</html>